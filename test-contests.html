<!DOCTYPE html>
<html>
<head>
    <title>LC Helper - Contest Fetching Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: #0f0f13;
            color: #f1f5f9;
        }
        .header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        h1 { margin: 0; color: white; }
        .platform {
            background: #1a1a23;
            padding: 20px;
            margin: 15px 0;
            border-radius: 12px;
            border: 1px solid #2d2d3a;
        }
        .platform h2 {
            color: #6366f1;
            margin-top: 0;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
        .status.loading {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }
        .status.success {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        .status.error {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }
        .contest-item {
            background: #252532;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 3px solid #6366f1;
        }
        .contest-name {
            font-weight: 600;
            color: #f1f5f9;
        }
        .contest-time {
            font-size: 13px;
            color: #94a3b8;
            margin-top: 4px;
        }
        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background: #818cf8;
        }
        .log {
            background: #1a1a23;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .log-entry {
            margin: 4px 0;
            padding: 4px 0;
            border-bottom: 1px solid #252532;
        }
        .log-time {
            color: #64748b;
        }
        .log-error {
            color: #ef4444;
        }
        .log-success {
            color: #10b981;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚ö° LC Helper - Contest API Test</h1>
        <p style="margin: 10px 0 0 0; opacity: 0.9;">Test contest fetching from all platforms</p>
    </div>

    <div style="margin-bottom: 20px;">
        <button onclick="testAll()">üîÑ Test All Platforms</button>
        <button onclick="clearLog()">üóëÔ∏è Clear Log</button>
    </div>

    <div class="platform" id="codeforces-section">
        <h2>
            Codeforces
            <span class="status loading" id="cf-status">Not tested</span>
        </h2>
        <div id="codeforces-results">Click "Test All" to fetch contests</div>
    </div>

    <div class="platform" id="leetcode-section">
        <h2>
            LeetCode
            <span class="status loading" id="lc-status">Not tested</span>
        </h2>
        <div id="leetcode-results">Click "Test All" to fetch contests</div>
    </div>

    <div class="platform" id="codechef-section">
        <h2>
            CodeChef
            <span class="status loading" id="cc-status">Not tested</span>
        </h2>
        <div id="codechef-results">Click "Test All" to fetch contests</div>
    </div>

    <div class="platform">
        <h2>üìã Debug Log</h2>
        <div class="log" id="log"></div>
    </div>

    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'log-error' : type === 'success' ? 'log-success' : '';
            logDiv.innerHTML += `<div class="log-entry ${className}"><span class="log-time">[${time}]</span> ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }

        function setStatus(platform, status) {
            const statusEl = document.getElementById(`${platform}-status`);
            statusEl.className = `status ${status}`;
            statusEl.textContent = status === 'loading' ? 'Loading...' : 
                                   status === 'success' ? 'Success' : 'Failed';
        }

        async function testCodeforces() {
            log('Testing Codeforces API...');
            setStatus('cf', 'loading');
            
            try {
                const response = await fetch('https://codeforces.com/api/contest.list');
                const data = await response.json();
                
                if (data.status !== 'OK') {
                    throw new Error('API returned error status');
                }
                
                const upcomingContests = data.result.filter(c => c.phase === 'BEFORE');
                log(`‚úÖ Codeforces: Found ${upcomingContests.length} upcoming contests`, 'success');
                
                const resultsDiv = document.getElementById('codeforces-results');
                if (upcomingContests.length === 0) {
                    resultsDiv.innerHTML = '<p>No upcoming contests found</p>';
                } else {
                    resultsDiv.innerHTML = upcomingContests.slice(0, 5).map(c => `
                        <div class="contest-item">
                            <div class="contest-name">${c.name}</div>
                            <div class="contest-time">Starts: ${new Date(c.startTimeSeconds * 1000).toLocaleString()}</div>
                        </div>
                    `).join('');
                }
                
                setStatus('cf', 'success');
            } catch (error) {
                log(`‚ùå Codeforces Error: ${error.message}`, 'error');
                document.getElementById('codeforces-results').innerHTML = 
                    `<p style="color: #ef4444;">Error: ${error.message}</p>`;
                setStatus('cf', 'error');
            }
        }

        async function testLeetCode() {
            log('Testing LeetCode via Kontests.net API...');
            setStatus('lc', 'loading');
            
            try {
                const response = await fetch('https://kontests.net/api/v1/leet_code');
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                const upcomingContests = data.filter(c => new Date(c.start_time) > new Date());
                
                log(`‚úÖ LeetCode: Found ${upcomingContests.length} upcoming contests`, 'success');
                
                const resultsDiv = document.getElementById('leetcode-results');
                if (upcomingContests.length === 0) {
                    resultsDiv.innerHTML = '<p style="color: #f59e0b;">‚ö†Ô∏è No contests found via API. LeetCode contests may not be available through third-party APIs.</p>';
                } else {
                    resultsDiv.innerHTML = upcomingContests.slice(0, 5).map(c => `
                        <div class="contest-item">
                            <div class="contest-name">${c.name}</div>
                            <div class="contest-time">Starts: ${new Date(c.start_time).toLocaleString()}</div>
                        </div>
                    `).join('');
                }
                
                setStatus('lc', 'success');
            } catch (error) {
                log(`‚ùå LeetCode Error: ${error.message}`, 'error');
                document.getElementById('leetcode-results').innerHTML = 
                    `<p style="color: #ef4444;">Error: ${error.message}<br><br>` +
                    `<span style="color: #94a3b8;">This is normal - LeetCode doesn't provide public API access. ` +
                    `Check contests directly at <a href="https://leetcode.com/contest/" target="_blank" style="color: #6366f1;">leetcode.com/contest</a></span></p>`;
                setStatus('lc', 'error');
            }
        }

        async function testCodeChef() {
            log('Testing CodeChef via Kontests.net API...');
            setStatus('cc', 'loading');
            
            try {
                const response = await fetch('https://kontests.net/api/v1/code_chef');
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                const upcomingContests = data.filter(c => new Date(c.start_time) > new Date());
                
                log(`‚úÖ CodeChef: Found ${upcomingContests.length} upcoming contests`, 'success');
                
                const resultsDiv = document.getElementById('codechef-results');
                if (upcomingContests.length === 0) {
                    resultsDiv.innerHTML = '<p style="color: #f59e0b;">‚ö†Ô∏è No upcoming contests found</p>';
                } else {
                    resultsDiv.innerHTML = upcomingContests.slice(0, 5).map(c => `
                        <div class="contest-item">
                            <div class="contest-name">${c.name}</div>
                            <div class="contest-time">Starts: ${new Date(c.start_time).toLocaleString()}</div>
                        </div>
                    `).join('');
                }
                
                setStatus('cc', 'success');
            } catch (error) {
                log(`‚ùå CodeChef Error: ${error.message}`, 'error');
                document.getElementById('codechef-results').innerHTML = 
                    `<p style="color: #ef4444;">Error: ${error.message}</p>`;
                setStatus('cc', 'error');
            }
        }

        async function testAll() {
            clearLog();
            log('=== Starting Contest API Tests ===');
            
            await testCodeforces();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testLeetCode();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testCodeChef();
            
            log('=== All tests completed ===', 'success');
        }

        // Auto-run on load
        window.onload = () => {
            log('Page loaded. Click "Test All Platforms" to begin.');
        };
    </script>
</body>
</html>

